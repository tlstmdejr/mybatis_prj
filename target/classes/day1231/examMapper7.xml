<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="day1231">


<!-- PL/SQL insert, update, delete, cursor -->
 <select id="insertProc" parameterType="memberDTO" statementType="CALLABLE">
 {call insert_member(#{name,mode=IN,jdbcType=VARCHAR},#{age,mode=IN,jdbcType=NUMERIC},
 #{gender,mode=IN,jdbcType=VARCHAR},#{tel,mode=IN,jdbcType=VARCHAR},#{cnt,mode=OUT,jdbcType=NUMERIC},
#{errMsg,mode=OUT,jdbcType=VARCHAR})} 
 </select>
 <select id="updateProc" parameterType="memberDTO" statementType="CALLABLE">
{call update_member(#{age,mode=IN,jdbcType=NUMERIC},#{tel,mode=IN,jdbcType=VARCHAR},
#{num,mode=IN,jdbcType=NUMERIC}, #{cnt,mode=OUT,jdbcType=NUMERIC},#{errMsg,mode=OUT,jdbcType=VARCHAR})
}
 </select>
 
 <select id="deleteProc" parameterType="memberDTO" statementType="CALLABLE">
{call
delete_member(
#{num,mode=IN,jdbcType=NUMERIC}, #{cnt,mode=OUT,jdbcType=NUMERIC},#{errMsg,mode=OUT,jdbcType=VARCHAR})
}
 </select>
 
 <!-- 조회결과를 저장할 resultMap을 선언 -->
 <resultMap type="hashMap" id="rowMap"/>
 
 <select id="selectOneProc"	statementType="CALLABLE">
 {call select_one_member( #{num,mode=IN,jdbcType=NUMERIC},
#{searchMember,mode=OUT,jdbcType=CURSOR,javaType=java.sql.ResultSet,resultMap=rowMap})}
 </select>
 
 <select id="selectAllProc"	statementType="CALLABLE">
 {call select_all_member(#{searchAllMember,mode=OUT,jdbcType=CURSOR,javaType=java.sql.ResultSet,resultMap=rowMap})}
 </select>
 
 </mapper>